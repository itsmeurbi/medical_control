<%= turbo_stream.update("treatments_list") do %>
  <h2 class="text-lg mb-2">
    Historial de tratamientos
  </h2>
  <% @treatments.each do |treatment| %>
    <div class = "grid grid-cols-2">
      <div>
        <h4 class="text-md">F. del tratamiento:</h4>
        <p class="ml-2"><%= l(treatment.date, format: '%d de %B del %Y') %></p>
        <h4 class="text-md mt-2">Procedimiento:</h4>
        <p class="ml-2"><%= treatment.procedure %></p>
        <h4 class="text-md mt-2">Medicamentos:</h4>
        <p class="ml-2"><%= treatment.meds %></p>
      </div>
      <div class="flex justify-end">
        <%= link_to edit_patient_consultation_path(id: treatment.id), data: { turbo: false }, class: "hover:text-blue-900", title: "Editar" do %>
          <%= show_svg("edit.svg") %>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>

<% if @treatments.any? %>
  <%= turbo_stream.update "treatments_pagination" do %>
    <%== pagy_nav(@pagy, link_extra: 'data-turbo-stream="true"') %>
  <% end %>
<% end %>
